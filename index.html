<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>오늘의 한 줄, 영화가 되다</title>
  <style>
    body {
      font-family: 'Noto Serif KR', serif;
      background-color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    textarea {
      width: 100%;
      max-width: 500px;
      height: 80px;
      padding: 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      resize: none;
    }
    button {
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background-color: #222;
      color: #fff;
      cursor: pointer;
    }
    .poster {
      margin-top: 2rem;
      width: 300px;
      height: 450px;
      border-radius: 16px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 8px 20px rgba(0,0,0,0.2);
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 1.5rem;
      color: white;
      text-shadow: 0 2px 4px rgba(0,0,0,0.6);
    }
    .poster-title {
      font-size: 1.5rem;
      font-weight: bold;
    }
    .poster-subtitle {
      font-size: 1rem;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>오늘의 한 줄, 영화가 되다</h1>
  <textarea id="diaryInput" placeholder="오늘 하루 어땠나요?"></textarea>
  <button onclick="generatePoster()">포스터 생성</button>
  <div id="posterContainer"></div>

  <script>
    const titles = ["겨울 너머", "조용한 밤", "그해 여름", "바람이 머문 자리", "끝나지 않은 하루"];
    const subtitles = [
      "기억은 늘 어딘가에 숨어 있다",
      "혼자인 줄 알았던 그날",
      "말하지 못했던 마음",
      "시간보다 깊은 온도",
      "잊고 싶은데 잊을 수 없는"
    ];

    function getRandomItem(list) {
      return list[Math.floor(Math.random() * list.length)];
    }

    async function generatePoster() {
      const diary = document.getElementById("diaryInput").value;
      if (!diary.trim()) return;

      const title = getRandomItem(titles);
      const subtitle = getRandomItem(subtitles);

      const keyword = diary.split(" ")[0];
      const response = await fetch(`https://source.unsplash.com/400x600/?${keyword},mood`);

      const posterDiv = document.createElement("div");
      posterDiv.className = "poster";
      posterDiv.style.backgroundImage = `url(${response.url})`;

      const titleEl = document.createElement("div");
      titleEl.className = "poster-title";
      titleEl.textContent = title;

      const subtitleEl = document.createElement("div");
      subtitleEl.className = "poster-subtitle";
      subtitleEl.textContent = subtitle;

      posterDiv.appendChild(titleEl);
      posterDiv.appendChild(subtitleEl);

      const container = document.getElementById("posterContainer");
      container.innerHTML = "";
      container.appendChild(posterDiv);
    }
  </script>
</body>
</html>
