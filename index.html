
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Movie Poster Diary</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; }
        textarea { width: 80%; height: 100px; margin-bottom: 20px; }
        button { padding: 10px 20px; font-size: 16px; }
        img { margin-top: 20px; max-width: 400px; height: auto; border: 2px solid #ccc; }
    </style>
</head>
<body>
    <h1>ğŸ¬ ë‚˜ë§Œì˜ ë¬´ë¹„ í¬ìŠ¤í„° ë§Œë“¤ê¸°</h1>
    <p>ì˜¤ëŠ˜ì˜ ê°ì •ì„ ì§§ê²Œ ë‚¨ê²¨ë³´ì„¸ìš”. ê°ì •ì— ì–´ìš¸ë¦¬ëŠ” ì˜í™” í¬ìŠ¤í„°ë¥¼ ë§Œë“¤ì–´ë“œë ¤ìš”!</p>
    <textarea id="diary" placeholder="ì˜ˆ: ì˜¤ëŠ˜ì€ íë¦¬ê³  ë§ˆìŒë„ ì¢€ ì¶•ì¶•í•´..."></textarea><br>
    <button onclick="generatePoster()">í¬ìŠ¤í„° ìƒì„±</button>
    <div id="posterResult"></div>

    <script>
        async function generatePoster() {
            const input = document.getElementById('diary').value.trim();
            if (!input) {
                alert("ë‚´ìš©ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”!");
                return;
            }

            const accessKey = "xOuOTRl5rRGfLR6nJclmqX4efk7dclCIoX5Ua4n8AgA";
            const query = encodeURIComponent(input);
            const url = `https://api.unsplash.com/search/photos?query=${query}&client_id=${accessKey}`;

            try {
                const res = await fetch(url);
                const data = await res.json();
                if (!data.results || data.results.length === 0) {
                    document.getElementById("posterResult").innerHTML = "âŒ ê´€ë ¨ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”.";
                    return;
                }

                const image = data.results[0];
                const downloadRes = await fetch(`${image.links.download_location}?client_id=${accessKey}`);
                const downloadData = await downloadRes.json();
                const imageUrl = downloadData.url;

                document.getElementById("posterResult").innerHTML = `
                    <h2>ğŸï¸ ë‹¹ì‹ ì˜ ë¬´ë¹„ í¬ìŠ¤í„°</h2>
                    <img src="${imageUrl}" alt="Generated Poster">
                    <p><strong>í‚¤ì›Œë“œ:</strong> ${query}</p>
                `;
            } catch (err) {
                console.error(err);
                document.getElementById("posterResult").innerHTML = "âš ï¸ ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.";
            }
        }
    </script>
</body>
</html>
